<div class="users-wrapper">
  <div class="users-container-list" [class.with-details]="isDetailsOpen">
    <div class="users-header">
      <h1 class="title">{{title}}</h1>
      <h2 class="subtitle">{{subtitle}}</h2>
    </div>
    <div class="filters-wrapper">
      <app-search-input [placeholder]="inputSearch" class="input-search"
        (searchChange)="handleSearchChange($event)">
        <img src="assets/svg/icon/input/search.svg" alt />
      </app-search-input>
      <button class="filters"><img src="assets/svg/icon/users/filters.svg">{{
        btnFilters }}</button>
      <button class="export"><img src="assets/svg/icon/users/export.svg">{{
        btnExport }}</button>
      <div class="selected-count" *ngIf="currentSelectedCount > 0">
        {{ currentSelectedCount }} usuário(s) selecionado(s)
      </div>
    </div>
    <app-list-users [searchQuery]="currentSearchQuery"
      (selectedCount)="handleSelectedCount($event)"
      (selectedUsersEvent)="handleSelectedUsers($event)">>
    </app-list-users>

  </div>
  <div class="users-container-details" [class.active]="isDetailsOpen"
    *ngIf="selectedUser">
    <div class="users-header">
      <div class="line-header">
        <div class="title">Details user</div>
        <div class="close-icon" matTooltipPosition="above"
          matTooltip="Fechar Menu" (click)="closeDetailsPanel()">
          <img src="assets/svg/icon/input/clear.svg">
        </div>
      </div>

      <img class="image-user" src="assets/user-photo.png" alt>
      <div class="user-line">
        <span class="name">{{ selectedUser.name }}</span>
        <app-situation-chip
          [situation]="selectedUser.situation"></app-situation-chip>
      </div>
      <div class="email">{{ selectedUser.email }}</div>
      <div class="permissions-list">
        <app-group-chip
          [groups]="selectedUser.group"
          [maxDisplay]="2"
          [allowExpand]="true">
          <!-- O padrão é false, então o clique não funcionará -->
        </app-group-chip>
      </div>
      <div class="phone-and-enrollment">
        <div class="phone">
          <img src="assets/svg/icon/users/phone.svg">
          {{ selectedUser.phone }}
        </div>
        <div class="enrollment">
          <img src="assets/svg/icon/users/document.svg">
          {{ selectedUser.enrollment }}
        </div>
      </div>
      <div class="divider"></div>
      <div class="permissions-container">
        <div class="title">Permissions</div>
        <div class="list-permissions">
          <div class="permission"
            *ngFor="let permission of permissionUserSelected">

            <img [matTooltip]="getCriticalText(permission.critical)"
              [matTooltipClass]="'tooltip'"
              matTooltipPosition="above"
              [src]="getSvgFileName(permission.critical)"
              class="critical-icon" />

            <span class="title" matTooltipPosition="above"
              [matTooltipClass]="'tooltip'"
              matTooltip="{{permission.title}}">{{ permission.title }}</span>

            <div class="extra-information">
              <div class="icon-wrapper" [matMenuTriggerFor]="detailsMenu">
                <img src="assets/svg/icon/register/step-2/extra_info.svg"
                  alt="Info"
                  [matTooltip]="menuTooltip" matTooltipPosition="above" />
              </div>

              <mat-menu #detailsMenu="matMenu" class="permission-details-menu">
                <div class="menu-content" (click)="$event.stopPropagation()">
                  <div class="menu-title">{{ permission.title }}</div>
                  <div class="menu-item">{{ permission.description }}</div>
                </div>
              </mat-menu>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
